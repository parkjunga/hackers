-- 테이블 순서는 관계를 고려하여 한 번에 실행해도 에러가 발생하지 않게 정렬되었습니다.

-- tb_category Table Create SQL
CREATE TABLE tb_category
(
    `category_no`     INT(11)        NOT NULL    AUTO_INCREMENT COMMENT '카테고리 분류번호', 
    `category_title`  VARCHAR(30)    NULL        COMMENT '카테코리명', 
    PRIMARY KEY (category_no)
);

ALTER TABLE tb_category COMMENT '카테고리';


-- tb_lecture Table Create SQL
CREATE TABLE tb_lecture
(
    `lecture_no`     INT             NOT NULL    AUTO_INCREMENT COMMENT '강의관리번호', 
    `category_no`    int(11)         NULL        COMMENT '분류명', 
    `lecture_title`  VARCHAR(100)    NULL        COMMENT '강의명', 
    `no`             int(11)         NULL        COMMENT '강사연결', 
    `time`           int             NULL        COMMENT '교육시간', 
    `lecture_level`  char(1)         NULL        COMMENT '학습난이도', 
    `file_no`        int(6)          NULL        COMMENT '강의썸네일', 
    PRIMARY KEY (lecture_no)
);


-- tb_file Table Create SQL
CREATE TABLE tb_file
(
    `file_no`        INT(6)          NOT NULL    AUTO_INCREMENT COMMENT '첨부파일관리번호', 
    `file_name`      VARCHAR(100)    NULL        COMMENT '파일명', 
    `file_ori_name`  VARCHAR(100)    NULL        COMMENT '서버파일명', 
    `file_type`      char(5)         NULL        COMMENT '파일확장자', 
    `file_path`      VARCHAR(100)    NULL        COMMENT '파일패스', 
    `reg_date`       DATE            NULL        COMMENT '등록일', 
    `name`           VARCHAR(15)     NULL        COMMENT '등록자', 
    PRIMARY KEY (file_no)
);


-- tb_review Table Create SQL
CREATE TABLE tb_review
(
    `board_no`     int(10)         NOT NULL    COMMENT '리뷰번호', 
    `id`           VARCHAR(25)     NULL        COMMENT '리뷰작성자', 
    `title`        VARCHAR(100)    NULL        COMMENT '리뷰제목', 
    `contents`     TEXT            NULL        COMMENT '내용', 
    `file_no`      INT(6)          NOT NULL    COMMENT '첨부파일연결번호', 
    `cnt`          int(10)         NOT NULL    COMMENT '조회수', 
    `category_no`  INT(11)         NOT NULL    COMMENT '카테고리 연결번호', 
    `reg_date`     DATETIME        NOT NULL    COMMENT '등록일', 
    PRIMARY KEY (board_no)
);

ALTER TABLE tb_review COMMENT '수강후기';

ALTER TABLE tb_review ADD CONSTRAINT FK_tb_review_category_no_tb_category_category_no FOREIGN KEY (category_no)
 REFERENCES tb_category (category_no)  ON DELETE RESTRICT ON UPDATE RESTRICT;


-- tb_review_file Table Create SQL
CREATE TABLE tb_review_file
(
    `file_no`        INT(6)          NOT NULL    COMMENT '첨부파일관리번호', 
    `file_name`      VARCHAR(100)    NOT NULL    COMMENT '서버파일명', 
    `file_type`      char(5)         NOT NULL    COMMENT '파일확장자', 
    `file_path`      VARCHAR(100)    NOT NULL    COMMENT '파일패스', 
    `board_no`       int(10)         NOT NULL    COMMENT '글번호', 
    `ori_name`       VARCHAR(100)    NOT NULL    COMMENT '원본파일명', 
    `file_size`      int(10)         NOT NULL    COMMENT '파일사이즈', 
    `file_group_no`  INT             NOT NULL    COMMENT '첨부파일그룹번호', 
    PRIMARY KEY (file_no)
);

ALTER TABLE tb_review_file COMMENT '수강후기 첨부파일';


-- tb_review_file_group Table Create SQL
CREATE TABLE tb_review_file_group
(
    `file_group_no`  INT       NOT NULL    COMMENT '파일그룹번호', 
    `file_no`        INT(6)    NULL        COMMENT '파일번호', 
    PRIMARY KEY (file_group_no)
);

ALTER TABLE tb_review_file_group COMMENT '수강후기 첨부파일 그룹';


